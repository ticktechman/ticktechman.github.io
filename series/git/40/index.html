<!DOCTYPE html>

<html lang="en">

<head>
  
  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-8H7XPB6TV4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-8H7XPB6TV4');
  </script>
  
  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6745756499567894"
    crossorigin="anonymous"></script>
  
  <meta charset="UTF-8">
  
  <meta name="description" content="引用文件有哪些，都用来做什么？">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Git原理-细说引用文件</title>
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="stylesheet" href="/assets/css/syntax.dark.css">
</head>

<body>
  <header class="">
  <div name="bar">
    <a href='/'><img name="logo" src="/assets/images/logo.webp"></a>
    <ul name="menu-h-area">
      <li>
        <a href='/'
          class=''>主页
        </a>
      </li>
      <li>
        <a href='/blog'
          class=''>博客
        </a>
      </li>
      <li>
        <a href='/series'
          class='current-menu'>专栏
        </a>
      </li>
      <li>
        <a href='/archive'
          class=''>归档
        </a>
      </li>
      <li>
        <a href='/about'
          class=''>关于
        </a>
      </li>
    </ul>
    <div class="flex flow-col space-x-4 items-center place-content-center">
      <button id="btn-menu" class="flex md:hidden" onclick="toggleMainMenu(event)">
        <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
          <path stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M1 1h15M1 7h15M1 13h15"></path>
        </svg>
      </button>
      <div id="main-menu-hidden" class="menu-hidden duration-300">
        <ul id="main-menu-ul">
          <li><a href='/'>主页</a></li>
          <li><a href='/blog'>博客</a></li>
          <li><a href='/series'>专栏</a></li>
          <li><a href='/archive'>归档</a></li>
          <li><a href='/about'>关于</a></li>
        </ul>
      </div>
      <button class="flex">
        <img id="language-selection" src="/assets/images/icon/lang-zh.svg" width="32"
          onclick="toggleLanguageMenu(event)" />
        <ul id="language-ul" class="menu-hidden duration-300">
          <li><a href='/'><img src="/assets/images/icon/lang-zh.svg" width="32" /></a></li>
          <li><a href='/en'><img src="/assets/images/icon/lang-en.svg" width="32" /></a></li>
        </ul>
      </button>
      <button class="flex" id="dark-mode">
        <svg class="w-6 h-6 block dark:hidden" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="7091" xmlns:xlink="http://www.w3.org/1999/xlink">
          <path fill="currentcolor"
            d="M512 783.945143a261.997714 261.997714 0 0 0 192.292571-79.725714A261.997714 261.997714 0 0 0 783.945143 512a261.997714 261.997714 0 0 0-79.725714-192.292571A261.997714 261.997714 0 0 0 512 240.054857c-36.790857 0-74.386286 8.484571-112.64 25.526857 46.811429 21.211429 84.699429 54.125714 113.737143 98.742857 28.964571 44.617143 43.52 93.842286 43.52 147.675429 0 53.833143-14.555429 103.058286-43.52 147.675429a263.899429 263.899429 0 0 1-113.664 98.742857A275.894857 275.894857 0 0 0 512 783.945143z m363.300571-422.765714L1024 512l-148.699429 150.820571v212.48H662.820571L512 1024l-150.820571-148.699429H148.699429V662.820571L0 512l148.699429-150.820571V148.699429h212.48L512 0l150.820571 148.699429h212.48v212.48z"
            p-id="7092"></path>
        </svg>
        <svg class="w-6 h-6 hidden dark:block" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
          p-id="5081" xmlns:xlink="http://www.w3.org/1999/xlink">
          <path fill="currentcolor"
            d="M502.518519 246.518519a256 256 0 1 0 0 512 256 256 0 0 0 0-512z m0 94.814814a161.185185 161.185185 0 1 1 0 322.370371 161.185185 161.185185 0 0 1 0-322.370371zM512 9.481481a48.545185 48.545185 0 0 1 48.279704 43.538963l0.227555 4.968297v72.628148a48.545185 48.545185 0 0 1-96.786963 4.968296l-0.227555-4.93037V57.950815C463.454815 31.213037 485.224296 9.481481 512 9.481481zM867.365926 156.634074a48.545185 48.545185 0 0 1 3.299555 64.967111l-3.337481 3.678815-51.351704 51.351704a48.545185 48.545185 0 0 1-71.945481-64.929185l3.337481-3.678815 51.351704-51.351704c18.962963-18.962963 49.682963-18.962963 68.645926 0zM1014.518519 512a48.545185 48.545185 0 0 1-43.538963 48.279704l-4.968297 0.227555h-72.628148a48.545185 48.545185 0 0 1-4.968296-96.786963l4.93037-0.227555h72.666074c26.775704 0 48.507259 21.731556 48.50726 48.507259zM867.365926 867.365926a48.545185 48.545185 0 0 1-64.967111 3.299555l-3.678815-3.337481-51.351704-51.351704a48.545185 48.545185 0 0 1 64.929185-71.945481l3.678815 3.337481 51.351704 51.351704c18.962963 18.962963 18.962963 49.682963 0 68.645926zM512 1014.518519a48.545185 48.545185 0 0 1-48.279704-43.538963l-0.227555-4.968297v-72.628148a48.545185 48.545185 0 0 1 96.786963-4.968296l0.227555 4.93037v72.666074A48.545185 48.545185 0 0 1 512 1014.518519zM156.634074 867.365926a48.545185 48.545185 0 0 1-3.299555-64.967111l3.337481-3.678815 51.351704-51.351704a48.545185 48.545185 0 0 1 71.945481 64.929185l-3.337481 3.678815-51.351704 51.351704c-18.962963 18.962963-49.682963 18.962963-68.645926 0zM9.481481 512a48.545185 48.545185 0 0 1 43.538963-48.279704l4.968297-0.227555h100.882963a48.545185 48.545185 0 0 1 4.968296 96.786963l-4.93037 0.227555H58.026667A48.545185 48.545185 0 0 1 9.481481 512zM156.634074 156.634074a48.545185 48.545185 0 0 1 64.967111-3.299555l3.678815 3.337481 51.351704 51.351704a48.545185 48.545185 0 0 1-64.929185 71.945481l-3.678815-3.337481L156.672 225.28c-18.962963-18.962963-18.962963-49.682963 0-68.645926z"
            p-id="5082"></path>
        </svg>
      </button>
    </div>
  </div>
</header>
  
<main class="pb-16 w-full bg-slate-50 dark:bg-slate-900 dark:border-none">
  
  <img class="w-full h-[200px] md:h-[300px] lg:h-[400px] object-cover shadow-md" src="/series/git/images/default.webp" alt="">
  
  <h2 class="pt-4 text-center">Git原理-细说引用文件</h2>
  <h4 class="text-center text-gray-400 text-sm mb-3">
    <span class="px-1 py-2">2024/06/07</span>
    <span class="px-1 py-2">|</span>
    <span class="px-1 py-2">字数1969</span>
    <span class="px-1 py-2">|</span>
    <span class="px-1 py-2">阅读4分钟</span>
  </h4>
  <hr class="w-4/5 sm:w-4/5 md:w-2/3 xl:w-1/2">

  
  <div id="page-content" class="mx-auto min-w-[340px] w-4/5 md:w-3/4 lg:w-2/3">
    <p>在《<a href="/series/git/38/">Git原理-元数据之谜</a>》中，我们简单介绍了一下两个引用文件：<code>HEAD</code>、<code>refs/heads/main</code>。本文我们详细介绍一下在git中，有哪些引用文件以及这些文件都是用来做什么的。</p>
<h1 id="head">HEAD</h1>
<ul>
<li>文件：<code>.git/HEAD</code></li>
<li>当前仓库的头指针，它可能是一个sym-ref（里面存储了一个字符串，指向另外一个引用文件），或者是一个OID（object-id），指向一个commit对象</li>
<li>当用户执行<code>git checkout &lt;SHA1&gt;</code>时，会将HEAD中的内容设置为一个commit对象的OID，一般情况下时指向一个分支的sym-ref；</li>
</ul>
<div class="flex flex-col bg-[#eee8d5] my-2 rounded-xl overflow-hidden shadow dark:bg-[#282c34]">
    <div class="mt-2 mx-4 flex flex-row">
        <div class="rounded-full size-3 bg-red-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-yellow-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-green-400 ml-1.5 my-auto"></div>
        <div class=" font-mono grow text-center">bash</div>
    </div>
    <div class="flex flex-row mx-4 my-3">
        <div class="grow text-white text-nowrap overflow-auto scroll" style="scrollbar-color: #ccc #282c34;scrollbar-width: thin;">
        
        <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="hl"><span class="lnt">2
</span></span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="hl"><span class="lnt">6
</span></span><span class="hl"><span class="lnt">7
</span></span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">## 指向一个分支</span>
</span></span><span class="line hl"><span class="cl">cat .git/HEAD
</span></span><span class="line"><span class="cl">ref: refs/heads/master
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 指向一个特定的commit</span>
</span></span><span class="line hl"><span class="cl">git checkout 2ddde35
</span></span><span class="line hl"><span class="cl">cat .git/HEAD
</span></span><span class="line"><span class="cl">2ddde356826d4ce2c3f5fffd44c5093d7f1221aa</span></span></code></pre></td></tr></table>
</div>
</div>
        </div>
        <div class="flex-none pl-1 text-right cursor-pointer" onclick="copyCode(this);">
            <svg name="copy-code" class="duration-500" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 48 48" fill="#ccc">
                <path d="M9 43.95q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.8h3v30.15h23.7v3Zm6-6q-1.2 0-2.1-.9-.9-.9-.9-2.1v-28q0-1.2.9-2.1.9-.9 2.1-.9h22q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h22v-28H15v28Zm0 0v-28 28Z"/>
            </svg>
            <svg name="copy-success" viewBox="0 0 1024 1024" class="hidden duration-500" width="24" fill="#0a0"><path d="M911.075556 192.796444a45.511111 45.511111 0 0 1 5.518222 64.113778l-455.111111 540.444445a45.511111 45.511111 0 0 1-68.835556 0.910222l-227.555555-256a45.511111 45.511111 0 0 1 68.039111-60.472889l192.625777 216.689778 421.205334-500.224a45.511111 45.511111 0 0 1 64.113778-5.461334z" p-id="5114"></path></svg>
        </div>
        <div class="hidden">## 指向一个分支
cat .git/HEAD
ref: refs/heads/master

## 指向一个特定的commit
git checkout 2ddde35
cat .git/HEAD
2ddde356826d4ce2c3f5fffd44c5093d7f1221aa</div>
    </div>
</div>
<h1 id="branch">branch</h1>
<ul>
<li>文件位于：<code>.git/refs/heads/</code></li>
<li>这是我们最常见的一个引用，记录当前开发的主分支信息</li>
<li>里面存放的是一个commit对象的OID</li>
<li>当我们在这个分支下执行<code>git commit</code>操作时，会将里面的内容修改为最新的commit对象的OID</li>
<li>位于<code>.git/refs/heads</code>目录下的文件分别对应了一个本地分支，可以被独立创建和删除</li>
</ul>
<div class="flex flex-col bg-[#eee8d5] my-2 rounded-xl overflow-hidden shadow dark:bg-[#282c34]">
    <div class="mt-2 mx-4 flex flex-row">
        <div class="rounded-full size-3 bg-red-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-yellow-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-green-400 ml-1.5 my-auto"></div>
        <div class=" font-mono grow text-center">bash</div>
    </div>
    <div class="flex flex-row mx-4 my-3">
        <div class="grow text-white text-nowrap overflow-auto scroll" style="scrollbar-color: #ccc #282c34;scrollbar-width: thin;">
        
        <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="hl"><span class="lnt"> 2
</span></span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="hl"><span class="lnt"> 6
</span></span><span class="hl"><span class="lnt"> 7
</span></span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="hl"><span class="lnt">11
</span></span><span class="hl"><span class="lnt">12
</span></span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="hl"><span class="lnt">16
</span></span><span class="hl"><span class="lnt">17
</span></span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">## master分支引用</span>
</span></span><span class="line hl"><span class="cl">cat .git/refs/heads/master
</span></span><span class="line"><span class="cl">b69cab5ee8f71009d312611ab87263a8b588abd8
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 修改master分支引用</span>
</span></span><span class="line hl"><span class="cl">git commit -m <span class="s2">&#34;new commit for master&#34;</span>
</span></span><span class="line hl"><span class="cl">cat .git/refs/heads/master
</span></span><span class="line"><span class="cl">15fd76b46eecca06277b06d992ca7da67e5e7411
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 新建分支引用dev</span>
</span></span><span class="line hl"><span class="cl">git checkout -b dev
</span></span><span class="line hl"><span class="cl">cat .git/refs/heads/dev
</span></span><span class="line"><span class="cl">b69cab5ee8f71009d312611ab87263a8b588abd8
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 删除dev分支引用</span>
</span></span><span class="line hl"><span class="cl">git branch -D dev
</span></span><span class="line hl"><span class="cl">ls .git/refs/heads
</span></span><span class="line"><span class="cl">master</span></span></code></pre></td></tr></table>
</div>
</div>
        </div>
        <div class="flex-none pl-1 text-right cursor-pointer" onclick="copyCode(this);">
            <svg name="copy-code" class="duration-500" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 48 48" fill="#ccc">
                <path d="M9 43.95q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.8h3v30.15h23.7v3Zm6-6q-1.2 0-2.1-.9-.9-.9-.9-2.1v-28q0-1.2.9-2.1.9-.9 2.1-.9h22q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h22v-28H15v28Zm0 0v-28 28Z"/>
            </svg>
            <svg name="copy-success" viewBox="0 0 1024 1024" class="hidden duration-500" width="24" fill="#0a0"><path d="M911.075556 192.796444a45.511111 45.511111 0 0 1 5.518222 64.113778l-455.111111 540.444445a45.511111 45.511111 0 0 1-68.835556 0.910222l-227.555555-256a45.511111 45.511111 0 0 1 68.039111-60.472889l192.625777 216.689778 421.205334-500.224a45.511111 45.511111 0 0 1 64.113778-5.461334z" p-id="5114"></path></svg>
        </div>
        <div class="hidden">## master分支引用
cat .git/refs/heads/master
b69cab5ee8f71009d312611ab87263a8b588abd8

## 修改master分支引用
git commit -m &#34;new commit for master&#34;
cat .git/refs/heads/master
15fd76b46eecca06277b06d992ca7da67e5e7411

## 新建分支引用dev
git checkout -b dev
cat .git/refs/heads/dev
b69cab5ee8f71009d312611ab87263a8b588abd8

## 删除dev分支引用
git branch -D dev
ls .git/refs/heads
master</div>
    </div>
</div>
<h1 id="remotes">remotes</h1>
<ul>
<li>文件位于：<code>.git/refs/remotes/&lt;remote-name&gt;/</code></li>
<li>记录了远端引用的相关信息，里面包含了两个文件：
<ul>
<li>HEAD是一个符号引用，指向远端master分支引用；</li>
<li>master指向一个远端的commit对象OID</li>
</ul>
</li>
<li>可以使用<code>git remote add/remove</code>来新建和删除远端引用</li>
<li>可以使用<code>git fetch</code>和<code>git push</code>来更新远端引用的信息</li>
</ul>
<div class="flex flex-col bg-[#eee8d5] my-2 rounded-xl overflow-hidden shadow dark:bg-[#282c34]">
    <div class="mt-2 mx-4 flex flex-row">
        <div class="rounded-full size-3 bg-red-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-yellow-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-green-400 ml-1.5 my-auto"></div>
        <div class=" font-mono grow text-center">bash</div>
    </div>
    <div class="flex flex-row mx-4 my-3">
        <div class="grow text-white text-nowrap overflow-auto scroll" style="scrollbar-color: #ccc #282c34;scrollbar-width: thin;">
        
        <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="hl"><span class="lnt"> 2
</span></span><span class="lnt"> 3
</span><span class="hl"><span class="lnt"> 4
</span></span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="hl"><span class="lnt"> 8
</span></span><span class="hl"><span class="lnt"> 9
</span></span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="hl"><span class="lnt">14
</span></span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">## 检查远端引用origin相关信息</span>
</span></span><span class="line hl"><span class="cl">cat .git/refs/remotes/origin/HEAD
</span></span><span class="line"><span class="cl">ref: refs/remotes/origin/master
</span></span><span class="line hl"><span class="cl">cat .git/refs/remotes/origin/master
</span></span><span class="line"><span class="cl">15fd76b46eecca06277b06d992ca7da67e5e7411
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 添加一个新的远端引用</span>
</span></span><span class="line hl"><span class="cl">git remote add github git@github.com:ticktechman/demo.git
</span></span><span class="line hl"><span class="cl">git remote -v
</span></span><span class="line"><span class="cl">github	git@github.com:ticktechman/demo.git <span class="o">(</span>fetch<span class="o">)</span>
</span></span><span class="line"><span class="cl">github	git@github.com:ticktechman/demo.git <span class="o">(</span>push<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin	/Users/ticktech/usr/playground/git/demo.git <span class="o">(</span>fetch<span class="o">)</span>
</span></span><span class="line"><span class="cl">origin	/Users/ticktech/usr/playground/git/demo.git <span class="o">(</span>push<span class="o">)</span>
</span></span><span class="line hl"><span class="cl">git push github</span></span></code></pre></td></tr></table>
</div>
</div>
        </div>
        <div class="flex-none pl-1 text-right cursor-pointer" onclick="copyCode(this);">
            <svg name="copy-code" class="duration-500" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 48 48" fill="#ccc">
                <path d="M9 43.95q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.8h3v30.15h23.7v3Zm6-6q-1.2 0-2.1-.9-.9-.9-.9-2.1v-28q0-1.2.9-2.1.9-.9 2.1-.9h22q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h22v-28H15v28Zm0 0v-28 28Z"/>
            </svg>
            <svg name="copy-success" viewBox="0 0 1024 1024" class="hidden duration-500" width="24" fill="#0a0"><path d="M911.075556 192.796444a45.511111 45.511111 0 0 1 5.518222 64.113778l-455.111111 540.444445a45.511111 45.511111 0 0 1-68.835556 0.910222l-227.555555-256a45.511111 45.511111 0 0 1 68.039111-60.472889l192.625777 216.689778 421.205334-500.224a45.511111 45.511111 0 0 1 64.113778-5.461334z" p-id="5114"></path></svg>
        </div>
        <div class="hidden">## 检查远端引用origin相关信息
cat .git/refs/remotes/origin/HEAD
ref: refs/remotes/origin/master
cat .git/refs/remotes/origin/master
15fd76b46eecca06277b06d992ca7da67e5e7411

## 添加一个新的远端引用
git remote add github git@github.com:ticktechman/demo.git
git remote -v
github	git@github.com:ticktechman/demo.git (fetch)
github	git@github.com:ticktechman/demo.git (push)
origin	/Users/ticktech/usr/playground/git/demo.git (fetch)
origin	/Users/ticktech/usr/playground/git/demo.git (push)
git push github</div>
    </div>
</div>
<h1 id="tags">tags</h1>
<ul>
<li>文件位于：<code>.git/refs/tags/</code></li>
<li>有两类tags引用：普通的、带注释的</li>
<li>可以使用<code>git tag &lt;tag-name&gt;</code>创建普通tag，使用<code>git tag &lt;tag-name&gt; -m &quot;xxx&quot;</code>创建带注释信息的tag</li>
<li>tag的内容不可被修改</li>
</ul>
<div class="flex flex-col bg-[#eee8d5] my-2 rounded-xl overflow-hidden shadow dark:bg-[#282c34]">
    <div class="mt-2 mx-4 flex flex-row">
        <div class="rounded-full size-3 bg-red-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-yellow-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-green-400 ml-1.5 my-auto"></div>
        <div class=" font-mono grow text-center">bash</div>
    </div>
    <div class="flex flex-row mx-4 my-3">
        <div class="grow text-white text-nowrap overflow-auto scroll" style="scrollbar-color: #ccc #282c34;scrollbar-width: thin;">
        
        <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="hl"><span class="lnt"> 2
</span></span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="hl"><span class="lnt"> 7
</span></span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="hl"><span class="lnt">10
</span></span><span class="lnt">11
</span><span class="lnt">12
</span><span class="hl"><span class="lnt">13
</span></span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="hl"><span class="lnt">22
</span></span><span class="lnt">23
</span><span class="lnt">24
</span><span class="hl"><span class="lnt">25
</span></span><span class="lnt">26
</span><span class="lnt">27
</span><span class="hl"><span class="lnt">28
</span></span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">## 查看tag信息</span>
</span></span><span class="line hl"><span class="cl">git tag -l
</span></span><span class="line"><span class="cl">v0.1
</span></span><span class="line"><span class="cl">v0.2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 创建普通tag</span>
</span></span><span class="line hl"><span class="cl">git tag v0.1 HEAD
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 普通tag指向一个commit对象</span>
</span></span><span class="line hl"><span class="cl">cat .git/refs/tags/v0.1
</span></span><span class="line"><span class="cl">1484b845a4740af06ccbe7d19901dbcca86a248c
</span></span><span class="line"><span class="cl">
</span></span><span class="line hl"><span class="cl">git cat-file -p 1484b845a4740af06ccbe7d19901dbcca86a248c
</span></span><span class="line"><span class="cl">tree 032b962a1b664a74363fa46fc908e744324e27f0
</span></span><span class="line"><span class="cl">parent 2ddde356826d4ce2c3f5fffd44c5093d7f1221aa
</span></span><span class="line"><span class="cl">author wystan &lt;oswystan@126.com&gt; <span class="m">1717808388</span> +0800
</span></span><span class="line"><span class="cl">committer wystan &lt;oswystan@126.com&gt; <span class="m">1717808388</span> +0800
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 创建带注释信息的tag</span>
</span></span><span class="line hl"><span class="cl">git tag v0.2 -m <span class="s2">&#34;v0.2 released&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 带注释信息的tag指向一个tag对象，这个tag对象指向一个commit对象</span>
</span></span><span class="line hl"><span class="cl">cat .git/refs/tags/v0.2
</span></span><span class="line"><span class="cl">715e4b0a6221d2449b314e68790098cea5e62905
</span></span><span class="line"><span class="cl">
</span></span><span class="line hl"><span class="cl">git cat-file -p 715e4b0a6221d2449b314e68790098cea5e62905
</span></span><span class="line"><span class="cl">object b69cab5ee8f71009d312611ab87263a8b588abd8
</span></span><span class="line"><span class="cl"><span class="nb">type</span> commit
</span></span><span class="line"><span class="cl">tag v0.2
</span></span><span class="line"><span class="cl">tagger wystan &lt;oswystan@126.com&gt; <span class="m">1717808752</span> +0800
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">v0.2 released</span></span></code></pre></td></tr></table>
</div>
</div>
        </div>
        <div class="flex-none pl-1 text-right cursor-pointer" onclick="copyCode(this);">
            <svg name="copy-code" class="duration-500" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 48 48" fill="#ccc">
                <path d="M9 43.95q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.8h3v30.15h23.7v3Zm6-6q-1.2 0-2.1-.9-.9-.9-.9-2.1v-28q0-1.2.9-2.1.9-.9 2.1-.9h22q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h22v-28H15v28Zm0 0v-28 28Z"/>
            </svg>
            <svg name="copy-success" viewBox="0 0 1024 1024" class="hidden duration-500" width="24" fill="#0a0"><path d="M911.075556 192.796444a45.511111 45.511111 0 0 1 5.518222 64.113778l-455.111111 540.444445a45.511111 45.511111 0 0 1-68.835556 0.910222l-227.555555-256a45.511111 45.511111 0 0 1 68.039111-60.472889l192.625777 216.689778 421.205334-500.224a45.511111 45.511111 0 0 1 64.113778-5.461334z" p-id="5114"></path></svg>
        </div>
        <div class="hidden">## 查看tag信息
git tag -l
v0.1
v0.2

## 创建普通tag
git tag v0.1 HEAD

## 普通tag指向一个commit对象
cat .git/refs/tags/v0.1
1484b845a4740af06ccbe7d19901dbcca86a248c

git cat-file -p 1484b845a4740af06ccbe7d19901dbcca86a248c
tree 032b962a1b664a74363fa46fc908e744324e27f0
parent 2ddde356826d4ce2c3f5fffd44c5093d7f1221aa
author wystan &lt;oswystan@126.com&gt; 1717808388 &#43;0800
committer wystan &lt;oswystan@126.com&gt; 1717808388 &#43;0800

1

## 创建带注释信息的tag
git tag v0.2 -m &#34;v0.2 released&#34;

## 带注释信息的tag指向一个tag对象，这个tag对象指向一个commit对象
cat .git/refs/tags/v0.2
715e4b0a6221d2449b314e68790098cea5e62905

git cat-file -p 715e4b0a6221d2449b314e68790098cea5e62905
object b69cab5ee8f71009d312611ab87263a8b588abd8
type commit
tag v0.2
tagger wystan &lt;oswystan@126.com&gt; 1717808752 &#43;0800

v0.2 released</div>
    </div>
</div>
<h1 id="stash">stash</h1>
<ul>
<li>文件：<code>.git/refs/stash</code></li>
<li>这是在执行<code>git stash</code>操作时创建的文件，里面对应的是一个commit对象的OID；</li>
<li>这里新创建了一个commit，用于记录本次stash操作的信息</li>
</ul>
<div class="flex flex-col bg-[#eee8d5] my-2 rounded-xl overflow-hidden shadow dark:bg-[#282c34]">
    <div class="mt-2 mx-4 flex flex-row">
        <div class="rounded-full size-3 bg-red-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-yellow-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-green-400 ml-1.5 my-auto"></div>
        <div class=" font-mono grow text-center">bash</div>
    </div>
    <div class="flex flex-row mx-4 my-3">
        <div class="grow text-white text-nowrap overflow-auto scroll" style="scrollbar-color: #ccc #282c34;scrollbar-width: thin;">
        
        <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="hl"><span class="lnt"> 2
</span></span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="hl"><span class="lnt"> 5
</span></span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="hl"><span class="lnt"> 9
</span></span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">## 修改一个文件，然后执行下面的stash命令</span>
</span></span><span class="line hl"><span class="cl">git stash 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 查看stash中的内容</span>
</span></span><span class="line hl"><span class="cl">cat .git/refs/stash
</span></span><span class="line"><span class="cl">063c84a00c12ca4de380b0a6c8be233e643fdb48
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## 查看这个OID对应的commit对象的内容</span>
</span></span><span class="line hl"><span class="cl">git cat-file -p 063c84a00c12ca4de380b0a6c8be233e643fdb48
</span></span><span class="line"><span class="cl">tree b8ab1cbcac9442078c111eea5c2f7d4e2b7f3565
</span></span><span class="line"><span class="cl">parent 15fd76b46eecca06277b06d992ca7da67e5e7411
</span></span><span class="line"><span class="cl">parent 352352a403f70885e8905d64f228196bd5a89b2b
</span></span><span class="line"><span class="cl">author wystan &lt;oswystan@126.com&gt; <span class="m">1717812687</span> +0800
</span></span><span class="line"><span class="cl">committer wystan &lt;oswystan@126.com&gt; <span class="m">1717812687</span> +0800
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">WIP on master: 15fd76b new commit <span class="k">for</span> master</span></span></code></pre></td></tr></table>
</div>
</div>
        </div>
        <div class="flex-none pl-1 text-right cursor-pointer" onclick="copyCode(this);">
            <svg name="copy-code" class="duration-500" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 48 48" fill="#ccc">
                <path d="M9 43.95q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.8h3v30.15h23.7v3Zm6-6q-1.2 0-2.1-.9-.9-.9-.9-2.1v-28q0-1.2.9-2.1.9-.9 2.1-.9h22q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h22v-28H15v28Zm0 0v-28 28Z"/>
            </svg>
            <svg name="copy-success" viewBox="0 0 1024 1024" class="hidden duration-500" width="24" fill="#0a0"><path d="M911.075556 192.796444a45.511111 45.511111 0 0 1 5.518222 64.113778l-455.111111 540.444445a45.511111 45.511111 0 0 1-68.835556 0.910222l-227.555555-256a45.511111 45.511111 0 0 1 68.039111-60.472889l192.625777 216.689778 421.205334-500.224a45.511111 45.511111 0 0 1 64.113778-5.461334z" p-id="5114"></path></svg>
        </div>
        <div class="hidden">## 修改一个文件，然后执行下面的stash命令
git stash 

## 查看stash中的内容
cat .git/refs/stash
063c84a00c12ca4de380b0a6c8be233e643fdb48

## 查看这个OID对应的commit对象的内容
git cat-file -p 063c84a00c12ca4de380b0a6c8be233e643fdb48
tree b8ab1cbcac9442078c111eea5c2f7d4e2b7f3565
parent 15fd76b46eecca06277b06d992ca7da67e5e7411
parent 352352a403f70885e8905d64f228196bd5a89b2b
author wystan &lt;oswystan@126.com&gt; 1717812687 &#43;0800
committer wystan &lt;oswystan@126.com&gt; 1717812687 &#43;0800

WIP on master: 15fd76b new commit for master</div>
    </div>
</div>
<p>注意上面的commit信息中，有两个parent，其中一个是在执行stash命令前，当前分支的commit对象OID，另一个是一个新建的commit对象，和第一个parent指向的tree对象为同一个，也就是说指向了同一个版本快照。关系图如下：
<img alt="git stash关系图" src="/series/git/images/refs.001.webp"></p>
<h1 id="packed-refs">packed-refs</h1>
<ul>
<li>文件：<code>.git/packed-refs</code></li>
<li>包含所有引用，每个引用占用一行</li>
<li>git在使用过程中，优先使用<code>.git/refs/xxx</code>目录下的引用，如果找不到，则到<code>packed-refs</code>中查找</li>
</ul>
<div class="flex flex-col bg-[#eee8d5] my-2 rounded-xl overflow-hidden shadow dark:bg-[#282c34]">
    <div class="mt-2 mx-4 flex flex-row">
        <div class="rounded-full size-3 bg-red-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-yellow-400 ml-1.5 my-auto"></div>
        <div class="rounded-full size-3 bg-green-400 ml-1.5 my-auto"></div>
        <div class=" font-mono grow text-center">bash</div>
    </div>
    <div class="flex flex-row mx-4 my-3">
        <div class="grow text-white text-nowrap overflow-auto scroll" style="scrollbar-color: #ccc #282c34;scrollbar-width: thin;">
        
        <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="hl"><span class="lnt">2
</span></span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">## 文件内容</span>
</span></span><span class="line hl"><span class="cl">cat .git/packed-refs
</span></span><span class="line"><span class="cl">15fd76b46eecca06277b06d992ca7da67e5e7411 refs/heads/master
</span></span><span class="line"><span class="cl">15fd76b46eecca06277b06d992ca7da67e5e7411 refs/remotes/github/master
</span></span><span class="line"><span class="cl">15fd76b46eecca06277b06d992ca7da67e5e7411 refs/remotes/origin/master
</span></span><span class="line"><span class="cl">f5a0fc64531839b87fb2b2d6154eca3b5c7f64ae refs/stash
</span></span><span class="line"><span class="cl">1484b845a4740af06ccbe7d19901dbcca86a248c refs/tags/v0.1
</span></span><span class="line"><span class="cl">715e4b0a6221d2449b314e68790098cea5e62905 refs/tags/v0.2
</span></span><span class="line"><span class="cl">^b69cab5ee8f71009d312611ab87263a8b588abd8</span></span></code></pre></td></tr></table>
</div>
</div>
        </div>
        <div class="flex-none pl-1 text-right cursor-pointer" onclick="copyCode(this);">
            <svg name="copy-code" class="duration-500" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 48 48" fill="#ccc">
                <path d="M9 43.95q-1.2 0-2.1-.9-.9-.9-.9-2.1V10.8h3v30.15h23.7v3Zm6-6q-1.2 0-2.1-.9-.9-.9-.9-2.1v-28q0-1.2.9-2.1.9-.9 2.1-.9h22q1.2 0 2.1.9.9.9.9 2.1v28q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h22v-28H15v28Zm0 0v-28 28Z"/>
            </svg>
            <svg name="copy-success" viewBox="0 0 1024 1024" class="hidden duration-500" width="24" fill="#0a0"><path d="M911.075556 192.796444a45.511111 45.511111 0 0 1 5.518222 64.113778l-455.111111 540.444445a45.511111 45.511111 0 0 1-68.835556 0.910222l-227.555555-256a45.511111 45.511111 0 0 1 68.039111-60.472889l192.625777 216.689778 421.205334-500.224a45.511111 45.511111 0 0 1 64.113778-5.461334z" p-id="5114"></path></svg>
        </div>
        <div class="hidden">## 文件内容
cat .git/packed-refs
15fd76b46eecca06277b06d992ca7da67e5e7411 refs/heads/master
15fd76b46eecca06277b06d992ca7da67e5e7411 refs/remotes/github/master
15fd76b46eecca06277b06d992ca7da67e5e7411 refs/remotes/origin/master
f5a0fc64531839b87fb2b2d6154eca3b5c7f64ae refs/stash
1484b845a4740af06ccbe7d19901dbcca86a248c refs/tags/v0.1
715e4b0a6221d2449b314e68790098cea5e62905 refs/tags/v0.2
^b69cab5ee8f71009d312611ab87263a8b588abd8</div>
    </div>
</div>
<h1 id="others">others</h1>
<p>当然还有一些其他的引用，只是平时用得不多，包括：</p>
<ul>
<li><code>.git/refs/replace/</code></li>
<li><code>.git/refs/notes/commit</code></li>
<li><code>.git/refs/prefetch/</code></li>
<li><code>.git/refs/rewritten/</code></li>
</ul>

  </div>
  

  <div class="mx-auto flex flex-row justify-between mt-8 min-w-[340px] w-4/5 md:w-3/4 lg:w-2/3">
    
    <a class="block px-4 py-2 text-sm text-gray-400 mx-1 bg-black/5 rounded italic hover:text-blue-500 dark:bg-white/10"
      href="/series/git/39/">上一篇：Git原理-解密暂存区</a>
    
    
    <a class="block px-4 py-2 text-sm text-gray-400 mx-1 bg-black/5 rounded italic hover:text-blue-500 dark:bg-white/10"
      href="/series/git/41/">下一篇：Git原理-垃圾回收</a>
    
  </div>
  
  <div class="flex flex-col mt-2 mx-auto min-w-[340px] w-4/5 md:w-3/4 lg:w-2/3">
    <p class="mx-auto font-bold text-red-500 cursor-pointer" onclick="coffee(this);">【文章不错，鼓励一下】</p>
    <img src="/assets/images/like.webp" class="mx-auto w-[280px] rounded-md border shadow hidden">
  </div>
  
</main>

<div id="page-model-image-diag"
  class="mx-auto items-center overflow-auto w-full h-full bg-black/80 fixed z-99 top-0 left-0 hidden"
  onclick="hideImageDiag(event, this)">
  <img src="" class="mx-auto max-w-[100vw] max-h-[100vh] cursor-zoom-in rounded-lg shadow-lg duration-500"
    onclick="largeImageClick(event);" onkeypress="largeImagePress(event)" ondblclick="imageZoomIn(event, this)">
</div>

  <footer>
  <div class="flex text-sm text-gray-400"> © ticktechman 2024</div>
  
</footer>
  <script src="/assets/js/dark-mode.js"></script>
  <script src="/assets/js/main.js"></script>
</body>

</html>